<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test de Padding de Iconos</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
        background: #f5f5f5;
      }
      .test-container {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      .test-result {
        margin: 10px 0;
        padding: 10px;
        border-radius: 4px;
      }
      .success {
        background-color: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
      }
      .error {
        background-color: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
      }
      .info {
        background-color: #d1ecf1;
        color: #0c5460;
        border: 1px solid #bee5eb;
      }
      button {
        margin: 5px;
        padding: 10px 15px;
        cursor: pointer;
        background: #007bff;
        color: white;
        border: none;
        border-radius: 4px;
      }
      button:hover {
        background: #0056b3;
      }
      .test-input {
        margin: 20px 0;
      }
    </style>
    <link rel="stylesheet" href="style.css" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  </head>
  <body>
    <div class="test-container">
      <h1>üîç Test de Padding de Iconos</h1>

      <div class="test-result info">
        <strong>Estado:</strong> Verificando estilos de campos con iconos...
      </div>

      <div class="test-input">
        <h3>üß™ Campo de prueba con icono:</h3>
        <div class="input-field-modern">
          <input
            type="text"
            id="test-input"
            class="validate"
            placeholder="Escribe aqu√≠ para probar..."
          />
          <label for="test-input">Campo de Prueba</label>
          <i class="material-icons prefix">person</i>
        </div>
      </div>

      <button onclick="testPaddingValues()">Verificar Padding</button>
      <button onclick="testAllInputs()">Test Todos los Campos</button>
      <button onclick="openMainApp()">Ir a Aplicaci√≥n Principal</button>

      <div id="results"></div>
    </div>

    <script>
      const results = document.getElementById("results");

      function addResult(message, type = "info") {
        const div = document.createElement("div");
        div.className = `test-result ${type}`;
        div.innerHTML = `<strong>${new Date().toLocaleTimeString()}:</strong> ${message}`;
        results.appendChild(div);
        console.log(`[${type.toUpperCase()}] ${message}`);
      }

      function testPaddingValues() {
        addResult("üîç Verificando valores de padding...", "info");
        results.innerHTML = "";

        // Test del campo de prueba
        const testInput = document.getElementById("test-input");
        if (testInput) {
          const computedStyle = window.getComputedStyle(testInput);
          const paddingLeft = computedStyle.paddingLeft;

          addResult(`üìè Padding izquierdo actual: ${paddingLeft}`, "info");

          if (paddingLeft === "50px") {
            addResult("‚úÖ ¬°CORRECTO! Padding de 50px aplicado correctamente", "success");
          } else if (paddingLeft === "44px") {
            addResult("‚ö†Ô∏è Padding de 44px detectado - aplicando correcci√≥n...", "info");
            testInput.style.paddingLeft = "50px !important";
            addResult("‚úÖ Correcci√≥n aplicada manualmente", "success");
          } else {
            addResult(`‚ùå Padding incorrecto: ${paddingLeft} (esperado: 50px)`, "error");
          }

          // Test de posici√≥n del icono
          const icon = testInput.nextElementSibling?.nextElementSibling;
          if (icon && icon.classList.contains("material-icons")) {
            const iconStyle = window.getComputedStyle(icon);
            const iconLeft = iconStyle.left;
            addResult(`üéØ Posici√≥n del icono: ${iconLeft}`, "info");

            if (iconLeft === "12px") {
              addResult("‚úÖ Icono correctamente posicionado", "success");
            } else {
              addResult(`‚ö†Ô∏è Icono en posici√≥n: ${iconLeft}`, "info");
            }
          }

          // Test de z-index
          const zIndex = computedStyle.zIndex;
          addResult(`üìä Z-index del input: ${zIndex}`, "info");
        }
      }

      function testAllInputs() {
        addResult("üîç Buscando todos los campos con iconos en la app principal...", "info");

        try {
          // Intentar acceder a la ventana principal si est√° disponible
          const mainWindow = window.parent !== window ? window.parent : window.opener || window;

          if (mainWindow && mainWindow.document) {
            const inputs = mainWindow.document.querySelectorAll(
              ".input-field-modern input, .input-field-search input"
            );

            addResult(`üìã Encontrados ${inputs.length} campos de entrada`, "info");

            inputs.forEach((input, index) => {
              const computedStyle = mainWindow.getComputedStyle(input);
              const paddingLeft = computedStyle.paddingLeft;
              const id = input.id || `input-${index}`;

              if (paddingLeft === "50px") {
                addResult(`‚úÖ ${id}: Padding correcto (${paddingLeft})`, "success");
              } else {
                addResult(`‚ùå ${id}: Padding incorrecto (${paddingLeft})`, "error");
              }
            });
          } else {
            addResult("‚ÑπÔ∏è No se puede acceder a la app principal desde esta ventana", "info");
            addResult(
              "üí° Abre este test desde la aplicaci√≥n principal o en una nueva pesta√±a",
              "info"
            );
          }
        } catch (error) {
          addResult(`‚ùå Error accediendo a la app principal: ${error.message}`, "error");
        }
      }

      function openMainApp() {
        window.open("/", "_blank");
      }

      // Auto-ejecutar test al cargar
      window.addEventListener("load", () => {
        setTimeout(() => {
          testPaddingValues();
        }, 1000);
      });

      // Agregar evento para probar en tiempo real
      document.getElementById("test-input").addEventListener("input", function () {
        const value = this.value;
        if (value.length > 0) {
          addResult(`‚úèÔ∏è Escribiendo: "${value}" - Verificando superposici√≥n...`, "info");

          // Verificar si el texto se superpone visualmente con el icono
          const rect = this.getBoundingClientRect();
          const icon = this.nextElementSibling?.nextElementSibling;

          if (icon) {
            const iconRect = icon.getBoundingClientRect();
            const overlap = iconRect.right > rect.left + 50;

            if (overlap) {
              addResult("‚ö†Ô∏è Posible superposici√≥n detectada", "error");
            } else {
              addResult("‚úÖ Sin superposici√≥n - texto visible correctamente", "success");
            }
          }
        }
      });
    </script>
  </body>
</html>
